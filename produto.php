<?php 
    $banco_de_dados = [
        1 => [
            "nome" => "Nike Air Zoom Pegasus", 
            "preco" => 599.90, 
            "img" => "https://images.unsplash.com/photo-1491553895911-0055eca6402d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80", 
            "desc" => "Ideal para corridas diárias, o Pegasus traz responsividade e ajuste perfeito para seus pés. Tecnologia Zoom Air para máximo conforto."
        ],
        2 => [
            "nome" => "Nike Air Force 1 '07", 
            "preco" => 749.90, 
            "img" => "https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80", 
            "desc" => "O brilho continua no Nike Air Force 1 '07, o tênis original de basquete que dá um toque de frescor ao que você conhece bem."
        ],
        3 => [
            "nome" => "Jordan 1 Retro High", 
            "preco" => 1299.00, 
            "img" => "https://images.unsplash.com/photo-1560769629-975ec94e6a86?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80", 
            "desc" => "Familiar, mas sempre novo. O Air Jordan 1 Retro High remasteriza o tênis clássico, dando a você um visual novo com uma sensação familiar."
        ],
        4 => [
            "nome" => "Vans Old Skool Classic", 
            "preco" => 399.90, 
            "img" => "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80", 
            "desc" => "O Old Skool foi o primeiro tênis a apresentar a icônica Sidestripe da Vans. Um clássico do skate e do streetwear."
        ],
        5 => [
            "nome" => "Nike Dunk Low Retro Panda", 
            "preco" => 899.00, 
            "img" => "https://images.unsplash.com/photo-1607792246307-2c7ba687b50a?q=80&w=1000&auto=format&fit=crop", 
            "desc" => "Criado para as quadras, mas levado para as ruas, o ícone do basquete dos anos 80 retorna com detalhes clássicos e estilo retrô."
        ],
        6 => [
            "nome" => "Adidas Yeezy Boost 350 V2", 
            "preco" => 1499.00, 
            "img" => "https://images.unsplash.com/photo-1587563871167-1ee9c731aefb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80", 
            "desc" => "O Yeezy Boost 350 V2 apresenta um cabedal composto de Primeknit recriado em duas cores. A entressola utiliza a tecnologia BOOST™ inovadora da Adidas."
        ],
        7 => [
            "nome" => "Air Jordan 1 Mid SE", 
            "preco" => 1199.00, 
            "img" => "https://images.unsplash.com/photo-1600185365483-26d7a4cc7519?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Air Jordan 1 Mid SE traz um visual icônico com conforto premium. Materiais de alta qualidade e design clássico."
        ],
        8 => [
            "nome" => "Converse x Off-White", 
            "preco" => 999.90, 
            "img" => "https://images.unsplash.com/photo-1551107696-a4b0c5a0d9a2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Uma colaboração icônica que reinventa o clássico Chuck Taylor com detalhes industriais e design desconstruído."
        ],
        9 => [
            "nome" => "Adidas Forum Low", 
            "preco" => 699.90, 
            "img" => "https://images.unsplash.com/photo-1620794341491-76be6eeb6946?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Mais do que apenas um tênis, o adidas Forum é uma declaração de estilo. Este design clássico de basquete foi atualizado para o uso diário."
        ],
        10 => [
            "nome" => "New Balance 550", 
            "preco" => 899.90, 
            "img" => "https://images.unsplash.com/photo-1512374382149-233c42b6a83b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O retorno de uma lenda. O New Balance 550 presta homenagem ao original de 1989 que definiu uma geração de basquete."
        ],
        11 => [
            "nome" => "Reebok Club C 85 Vintage", 
            "preco" => 449.90, 
            "img" => "https://images.unsplash.com/photo-1608231387042-66d1773070a5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Estilo simples e limpo. O Club C 85 Vintage traz a herança do tênis com um visual atemporal e couro macio."
        ],
        12 => [
            "nome" => "Nike Air Max 90 Infra", 
            "preco" => 749.90, 
            "img" => "https://images.unsplash.com/photo-1543508282-6319a3e2621f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Nike Air Max 90 permanece fiel às suas raízes de corrida com a icônica sola Waffle, sobreposições costuradas e detalhes clássicos em TPU."
        ],
        13 => [
            "nome" => "Puma Suede Classic XXI", 
            "preco" => 399.90, 
            "img" => "https://images.unsplash.com/photo-1597045566677-8cf032ed6634?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Suede chegou em 1968 e tem mudado o jogo desde então. Um ícone para todas as gerações."
        ],
        14 => [
            "nome" => "Nike Air Zoom Alphafly", 
            "preco" => 1299.00, 
            "img" => "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Prepare-se para bater seu recorde pessoal. O Alphafly combina amortecimento responsivo e propulsão para o dia da corrida."
        ],
        15 => [
            "nome" => "Adidas Ultraboost 22", 
            "preco" => 999.90, 
            "img" => "https://images.unsplash.com/photo-1584735175097-719d848f8449?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Conforto e retorno de energia incríveis. O Ultraboost 22 foi projetado para oferecer o melhor desempenho em cada passada."
        ],
        16 => [
            "nome" => "Asics Gel-Nimbus 25", 
            "preco" => 899.90, 
            "img" => "https://images.unsplash.com/photo-1539185441755-769473a23570?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Experimente o conforto das nuvens com o Gel-Nimbus 25. Amortecimento superior para corridas de longa distância."
        ],
        17 => [
            "nome" => "Mizuno Wave Prophecy", 
            "preco" => 1100.00, 
            "img" => "https://images.unsplash.com/photo-1514989940723-e8e51635b782?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Tecnologia Infinity Wave para amortecimento duradouro e estabilidade. Um ícone de desempenho e estilo."
        ],
        18 => [
            "nome" => "Converse Chuck 70 High", 
            "preco" => 499.00, 
            "img" => "https://images.unsplash.com/photo-1607522370275-f14206abe5d3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Chuck 70 celebra a herança original dos anos 70 com materiais premium e atenção extraordinária aos detalhes."
        ],
        19 => [
            "nome" => "Adidas Superstar Classic", 
            "preco" => 449.90, 
            "img" => "https://images.unsplash.com/photo-1605408499391-6368c628ef42?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O tênis da biqueira de concha. Originalmente feito para as quadras de basquete nos anos 70, celebrado pela realeza do hip hop nos anos 80."
        ],
        20 => [
            "nome" => "Nike Air Force 1 Shadow", 
            "preco" => 799.90, 
            "img" => "https://images.unsplash.com/photo-1552346154-21d32810aba3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Nike Air Force 1 Shadow coloca um toque divertido em um design clássico de basquete com camadas duplas e estilo ousado."
        ],
        21 => [
            "nome" => "Air Jordan 4 Retro", 
            "preco" => 1899.00, 
            "img" => "https://images.unsplash.com/photo-1611510338559-2f463335092c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "Um dos modelos mais amados da linha Jordan. O Retro 4 traz suporte, estilo e a herança de Michael Jordan."
        ],
        22 => [
            "nome" => "Nike SB Dunk Low Pro", 
            "preco" => 999.90, 
            "img" => "https://images.unsplash.com/photo-1628253747716-0c4f5c90fdda?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Nike SB Dunk Low Pro oferece estilo icônico do skate com desempenho moderno e conforto para o dia todo."
        ],
        23 => [
            "nome" => "Travis Scott x Jordan", 
            "preco" => 3500.00, 
            "img" => "https://images.unsplash.com/photo-1514989940723-e8e51635b782?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "A colaboração explosiva entre Travis Scott e Jordan Brand. Detalhes únicos e materiais premium definem este modelo exclusivo."
        ],
        24 => [
            "nome" => "Yeezy 700 V3 Azael", 
            "preco" => 2200.00, 
            "img" => "https://images.unsplash.com/photo-1597248881519-db089d3744a5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80", 
            "desc" => "O Yeezy 700 V3 apresenta um cabedal de monofilamento com sobreposições RPU para estrutura e durabilidade."
        ]
    ];

    $id_atual = isset($_GET['id']) ? (int)$_GET['id'] : 1;
    $produto = isset($banco_de_dados[$id_atual]) ? $banco_de_dados[$id_atual] : $banco_de_dados[1];

    $titulo = $produto['nome'] . " | JSON CALÇADOS";
    $pagina_atual = "produto";
    
    $css_extra = "
    <style>
        .small-container { margin-top: 80px; }
        .row { display: flex; align-items: center; flex-wrap: wrap; justify-content: space-around; }
        .col-2 img { width: 100%; padding: 0; border-radius: 10px; cursor: pointer; transition: transform 0.3s; }
        .col-2 img:hover { transform: scale(1.02); }
        .single-product h4 { margin: 20px 0; font-size: 22px; font-weight: bold; }
        .single-product select { display: block; padding: 10px; margin-top: 20px; border: 1px solid #ff523b; border-radius: 5px; outline: none; }
        .single-product input { width: 50px; height: 40px; padding-left: 10px; font-size: 20px; margin-right: 10px; border: 1px solid #ff523b; border-radius: 5px; outline: none; }
        .price { color: #ff523b; font-size: 26px; font-weight: bold; margin-bottom: 20px; display: block; }
        .small-img-row { display: flex; justify-content: space-between; margin-top: 15px; }
        .small-img-col { flex-basis: 24%; cursor: pointer; border-radius: 5px; overflow: hidden; }
        .small-img-col img { width: 100%; height: 100%; object-fit: cover; }
    </style>
    ";

    include 'header.php'; 
?>

<div class="small-container single-product">
    <div class="row">
        <div class="col-2">
            <img src="<?php echo $produto['img']; ?>" width="100%" id="ProductImg" alt="<?php echo $produto['nome']; ?>">
            
            <div class="small-img-row">
                <div class="small-img-col">
                    <img src="<?php echo $produto['img']; ?>" width="100%" class="small-img" onclick="trocarImagem(this.src)">
                </div>
                <div class="small-img-col">
                    <img src="<?php echo $produto['img']; ?>" width="100%" class="small-img" style="filter: hue-rotate(45deg);" onclick="trocarImagem(this.src)">
                </div>
                <div class="small-img-col">
                    <img src="<?php echo $produto['img']; ?>" width="100%" class="small-img" style="filter: hue-rotate(90deg);" onclick="trocarImagem(this.src)">
                </div>
                <div class="small-img-col">
                    <img src="<?php echo $produto['img']; ?>" width="100%" class="small-img" style="filter: hue-rotate(180deg);" onclick="trocarImagem(this.src)">
                </div>
            </div>
        </div>

        <div class="col-2">
            <p style="color:#555;">Home / Tênis / <?php echo $produto['nome']; ?></p>
            <h1 style="font-size: 40px; line-height: 1.2; margin: 15px 0;"><?php echo $produto['nome']; ?></h1>
            <span class="price">R$ <?php echo number_format($produto['preco'], 2, ',', '.'); ?></span>
            
            <select>
                <option>Selecione o Tamanho</option>
                <option>38</option>
                <option>39</option>
                <option>40</option>
                <option>41</option>
                <option>42</option>
                <option>43</option>
            </select>

            <br>
            <input type="number" value="1" min="1">
            <a href="#" class="btn" onclick="adicionarAoCarrinho()">Adicionar ao Carrinho</a>

            <h3 style="margin-top: 30px;">Detalhes do Produto <i class="fa fa-indent" style="color: #ff523b;"></i></h3>
            <br>
            <p style="line-height: 1.6; color: #555;"><?php echo $produto['desc']; ?></p>
            
            <p style="margin-top: 20px; color: #999; font-size: 12px;">
                SKU: JSON-<?php echo str_pad($id_atual, 4, '0', STR_PAD_LEFT); ?>
            </p>
        </div>
    </div>
</div>

<div class="small-container">
    <div class="row row-2">
        <h2>Veja Também</h2>
        <p>Clientes que viram este produto também compraram</p>
    </div>
    <div class="row">
        <?php 
        $contador = 0;
        foreach($banco_de_dados as $id => $p) {
            if ($id == $id_atual) continue;
            if ($contador >= 4) break;
            
            echo '
            <div class="col-4" onclick="window.location.href=\'produto.php?id='.$id.'\'" style="cursor: pointer;">
                <img src="'.$p['img'].'" alt="'.$p['nome'].'">
                <h4>'.$p['nome'].'</h4>
                <div class="rating"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></div>
                <p>R$ '.number_format($p['preco'], 2, ',', '.').'</p>
            </div>';
            $contador++;
        }
        ?>
    </div>
</div>

<script>
    var ProductImg = document.getElementById("ProductImg");
    
    function trocarImagem(srcNova) {
        ProductImg.src = srcNova;
    }

    function adicionarAoCarrinho() {
        const tamanhoSelect = document.querySelector('select');
        const tamanho = tamanhoSelect.options[tamanhoSelect.selectedIndex].text;
        const quantidade = document.querySelector('input[type="number"]').value;

        if(tamanho === "Selecione o Tamanho") {
            alert("Por favor, escolha um tamanho.");
            return;
        }

        const produto = {
            id: <?php echo $id_atual; ?>,
            nome: "<?php echo $produto['nome']; ?>",
            preco: <?php echo $produto['preco']; ?>,
            img: "<?php echo $produto['img']; ?>",
            tamanho: tamanho,
            qtd: parseInt(quantidade)
        };

        let carrinho = JSON.parse(localStorage.getItem('jsonCarrinho')) || [];
        let existente = carrinho.find(item => item.id === produto.id && item.tamanho === produto.tamanho);

        if(existente) {
            existente.qtd += produto.qtd;
        } else {
            carrinho.push(produto);
        }

        localStorage.setItem('jsonCarrinho', JSON.stringify(carrinho));
        
        if(confirm("Produto adicionado! Ir para o carrinho?")) {
            window.location.href = "carrinho.php";
        }
    }
</script>

<?php include 'footer.php'; ?>